:root { --bg:#0b0a1a; --fg:#e8e8ee; --accent:#ffd54a; }

/* --- reset & mobile friendliness --- */
*{box-sizing:border-box}
html,body{margin:0;height:100%;background:var(--bg);color:var(--fg);font:14px system-ui,Segoe UI,Roboto,Arial}
body{overscroll-behavior:contain; touch-action:manipulation}

/* chrome */
.topbar,.bottombar{
  display:flex;align-items:center;gap:.75rem;background:#14122b;
  padding:.5rem 1rem;position:sticky;z-index:10
}
.topbar{top:0} .bottombar{bottom:0;opacity:.9}
.spacer{flex:1}
.btn{background:#232046;border:1px solid #373260;color:var(--fg);padding:.35rem .6rem;border-radius:.45rem;cursor:pointer}

/* stage layout */
main{
  display:flex; flex-direction:column; align-items:center; 
  gap:.75rem; padding:.5rem;
  /* leave room so the D-pad doesn't overlap */
  padding-bottom: 120px;
  min-height: calc(100dvh - 88px); /* account for top bar */
}
.stageWrap{position:relative; max-width:min(96vw, 720px); width:100%}

/* SCALE BY HEIGHT so it stays on-screen */
#stage{
  height: min(72vh, calc(100dvh - 220px)); /* always visible */
  width: auto;                /* keep 3:4 aspect via aspect-ratio */
  aspect-ratio: 3 / 4;
  border:2px solid #2d2952;border-radius:.6rem;background:#0f0f20;
  touch-action:none
}
.hud{
  position:absolute;left:8px;top:8px;background:rgba(0,0,0,.55);
  padding:.25rem .5rem;border-radius:.35rem;font:12px monospace;color:#9cf
}

/* overlay */
.overlay{position:fixed;inset:0;background:rgba(10,10,20,.65);
  backdrop-filter:blur(3px);display:none;place-items:center;z-index:20}
.card{background:#14122b;border:1px solid #373260;border-radius:.8rem;
  box-shadow:0 10px 30px rgba(0,0,0,.35);padding:1rem;width:min(480px,92vw)}
.title{font-weight:700;margin:0 0 .25rem}
.row{display:flex;gap:.5rem;flex-wrap:wrap;justify-content:flex-end;margin-top:.5rem}

/* D-pad: fixed & easier to hit */
.touchpad{
  position: fixed; left:50%; transform:translateX(-50%);
  bottom: max(12px, env(safe-area-inset-bottom));
  background:#14122b; padding:.6rem .7rem; border-radius:.8rem;
  display:flex; gap:.6rem; align-items:center; justify-content:center;
  z-index:15; box-shadow:0 6px 20px rgba(0,0,0,.35)
}
.touchpad .v{display:flex;flex-direction:column;gap:.45rem}
.tbtn{
  width:64px;height:64px;           /* bigger target */
  border:1px solid #373260;background:#232046;color:#eee;
  border-radius:.7rem;font-size:22px
}
.pump{width:86px}

@media (hover:hover){ .touchpad{display:none} } /* hide on desktop */
.muted{opacity:.85}